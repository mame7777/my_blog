---
title: 'ネットワーク制御信号灯を使ってみる'
summary: 'PATLITE社のHNL-FV2シリーズを使ってみた'
description: 'ネットワーク制御信号灯であるPATLITE社のHNL-FV2シリーズを自宅に導入してみた．また．zabbixなどから制御できるようにするために，コマンド周りを触ってみた．'
date: '2024-05-13'
slug: '0010-patlite-nhl-fv2'
hero_image: '../../images/posts/0010/patlite-image.jpg'
---

## NHL-FV2とは
PATLITE社から販売されているネットワーク制御信号灯である．ネットワーク越しに積層信号灯を操作でき，普通の信号灯のように24Vラインを含む制御回路などが必要ない優れもの！<br/>
同じような他社製品に「警子ちゃん」などがある．<br/>
Twitterなどの誤家庭の写真などで見かけてかねてより欲しかったので，某オクで購入した．

## 購入後にしたこと
### 初期設定
届いたあとは，初期化ボタンで初期化後，IPやNTPなどの設定をweb UIを用いて投入した．<br/>
割と簡単に設定できてとてもよかった．

### ネットワーク制御に関して調査
ネットワークから制御するには，以下の方式があるようである．（詳しくは取説参照．）
- SNMP SETコマンド
- PHNコマンド：ソケット通信を用いたコマンド
- PNSコマンド：ソケット通信を用いたPATLITE製品を制御するコマンド

雑に調べた感じ，PATLITEさんのソフトウェアを使用して制御するにはライセンスが必要そうだったので，PNSコマンドを用いて自前で制御することにした．<br/>
このことにより，zabbix・Grafanaなどからアラート発火時に信号灯を制御することを目指した．<br/>
なお，コマンドは取り扱い説明書に詳しく書いてあるので，そちらを参考にして欲しい．

### 制御用お気持ちAPIの実装
Pythonでwebサーバを立て，そこにPOSTリクエストを送ると，リクエスト内容に応じて制御信号を送信するコードを書いた．<br/>
NHL-FV2シリーズは他にも多くのことを制御可能であるが，とりあえずミニマムの機能のみ実装した．<br/>
コードと実行方法は[github](https://github.com/mame7777/PATLITE_NH-FV_API)にあるので，そちらを参照して欲しい．<br/>
zabbixやGrafanaでアラートの設定をするとき，これらのAPIをたたかせることで信号灯が制御できるはず！（時間がなくて未検証）

### そのほか
web UIからでも，pingの設定などを簡単に投入できたので，とりあえず欲しい！という方にも是非オススメした製品だと感じた．（※なお，本シリーズは既に生産終了品で後継機種が出ている）<br/>
音量調整もできるし，最大5段までライト増設可能でとてもよい．購入後すぐに増設した．